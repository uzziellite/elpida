---
import Layout from "@layouts/layout.astro";
import Search from "@components/Search.svelte";

//Load blogs
const res = await fetch(`${import.meta.env.PUBLIC_CMS}wp-json/wp/v2/posts?_embed&per_page=20&sort=desc`)
const data = await res.json()
---

<Layout title="Blog - Elpida Africa">
	<!-- breadcrumb-area-start -->
  <div class="tp-breadcrumb__area p-relative fix tp-breadcrumb-height"
      data-background="/images/blog-banner.jpg">
      <div class="tp-breadcrumb__shape-1 z-index-5">
          <img src="/assets/img/breadcrumb/breadcrumb-shape-1.png" alt="">
      </div>
      <div class="tp-breadcrumb__shape-2 z-index-5">
          <img src="/assets/img/breadcrumb/breadcrumb-shape-2.png" alt="">
      </div>
      <div class="container">
          <div class="row">
              <div class="col-12">
                  <div class="tp-breadcrumb__content z-index-5">
                      <div class="tp-breadcrumb__list">
                          <span><a href="/">home</a></span>
                          <span class="dvdr"><i class="fa-sharp fa-solid fa-slash-forward"></i></span>
                          <span>Blog</span>
                      </div>
                      <h3 class="tp-breadcrumb__title">Blog</h3>
                  </div>
              </div>
          </div>
      </div>
  </div>
  <!-- breadcrumb-area-end -->

  <!-- postbox area start -->
  <section class="postbox__area pt-120 pb-120">
      <div class="container">
          <div class="row">
              <div class="col-xxl-8 col-xl-8 col-lg-8">
                  <div class="postbox__wrapper-2">
                    {
                      data.map((item) => (
                        <article class="postbox__item format-image mb-60 transition-3">
                            <div class="postbox__thumb w-img">
                                <a href={`/blog/${item.slug}`}>
                                    <img src={item._embedded["wp:featuredmedia"] ? item._embedded["wp:featuredmedia"][0].media_details.sizes.full.source_url : ''} alt={item.title.rendered} />
                                </a>
                            </div>
                            <div class="postbox__content">
                                <div class="postbox__meta">
                                    <span>
                                      <i class="flaticon-user"></i>
                                      By {item['_embedded'].author[0].name}
                                    </span>
                                </div>
                                <h3 class="postbox__title">
                                    <a href={`/blog/${item.slug}`}>
                                      {item.title.rendered}
                                    </a>
                                </h3>
                                <div class="postbox__text" set:html={item.excerpt.rendered}></div>
                                <div class="postbox__read-more">
                                    <a href={`/blog/${item.slug}`} class="tp-btn">read more</a>
                                </div>
                            </div>
                        </article>
                      ))
                    }
                      <!--<article class="postbox__item format-image mb-60 transition-3">
                          <div class="postbox__thumb w-img">
                              <a href="blog-details.html">
                                  <img src="assets/img/blog/blog-details-2.jpg" alt="">
                              </a>
                              <div class="postbox__play-btn">
                                  <a class="popup-video pulse-btn"
                                      href="https://www.youtube.com/watch?v=rVHxkxJM3rY"><i
                                          class="fa-sharp fa-solid fa-play"></i></a>
                              </div>
                          </div>
                          <div class="postbox__content">
                              <div class="postbox__meta">
                                  <span><i class="flaticon-user"></i>By Poorex</span>
                                  <span><a href="#"><i class="flaticon-comment"></i>02 Comments</a></span>
                              </div>
                              <h3 class="postbox__title">
                                  <a href="blog-details.html">Donate Your Money For Poor Childrens </a>
                              </h3>
                              <div class="postbox__text">
                                  <p>Curabitur luctus euismod metus, eu pellentesque mauris tempus sit amet. Proin
                                      ante odio, posuere <br>id lacus auctor, elementum tempor tellus. Integer
                                      mattis justo eu enim tempus lacinia. Fusce vitae <br>enim diam. Ut commodo
                                      viverra magna non egestas. Integer sodales .</p>
                              </div>
                              <div class="postbox__read-more">
                                  <a href="blog-details.html" class="tp-btn">read more</a>
                              </div>
                          </div>
                      </article>
                      <article class="postbox__item format-image mb-60 transition-3">
                          <div class="postbox__thumb w-img">
                              <div class="postbox__thumb-slider p-relative">
                                  <div class="swiper-container postbox__thumb-slider-active">
                                      <div class="swiper-wrapper">
                                          <div class="swiper-slide">
                                              <img src="assets/img/blog/blog-details-3.jpg" alt="">
                                          </div>
                                          <div class="swiper-slide">
                                              <img src="assets/img/blog/blog-details-2.jpg" alt="">
                                          </div>
                                          <div class="swiper-slide">
                                              <img src="assets/img/blog/blog-details-1.jpg" alt="">
                                          </div>
                                      </div>
                                  </div>
                                  <div class="postbox__slider-arrow-wrap">
                                      <button class="postbox-arrow-prev">
                                          <i class="fa-solid fa-angle-left"></i>
                                      </button>
                                      <button class="postbox-arrow-next">                                                
                                          <i class="fa-solid fa-angle-right"></i>
                                      </button>
                                  </div>
                              </div>
                          </div>
                          <div class="postbox__content">
                              <div class="postbox__meta">
                                  <span><i class="flaticon-user"></i>By Poorex</span>
                                  <span><a href="#"><i class="flaticon-comment"></i>02 Comments</a></span>
                              </div>
                              <h3 class="postbox__title">
                                  <a href="blog-details.html">Four Ways a Workplace Makes Employees Happy</a>
                              </h3>
                              <div class="postbox__text">
                                  <p>Curabitur luctus euismod metus, eu pellentesque mauris tempus sit amet. Proin
                                      ante odio, posuere <br>id lacus auctor, elementum tempor tellus. Integer
                                      mattis justo eu enim tempus lacinia. Fusce vitae <br>enim diam. Ut commodo
                                      viverra magna non egestas. Integer sodales .</p>
                              </div>
                              <div class="postbox__read-more">
                                  <a href="blog-details.html" class="tp-btn">read more</a>
                              </div>
                          </div>
                      </article>-->

                      <!-- Start Pagination -->
                      <!--<div class="basic-pagination">
                          <nav>
                              <ul>
                                  <li>
                                      <a href="blog.html">1</a>
                                  </li>
                                  <li>
                                      <a href="blog.html">2</a>
                                  </li>
                                  <li>
                                      <a href="blog.html">3</a>
                                  </li>
                                  <li>
                                      <a href="blog.html">
                                          <span class="current"><i class="flaticon-arrow-right"></i></span>
                                      </a>
                                  </li>
                              </ul>
                          </nav>
                      </div>-->
                      <!-- End Pagination -->

                  </div>
              </div>
              <div class="col-xxl-4 col-xl-4 col-lg-4">
                  <div class="sidebar__wrapper">
                      <Search client:load />
                  </div>
              </div>
          </div>
      </div>
  </section>
  <!-- postbox area end -->
</Layout>